

  
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Please write a title for this worksheet! &#8212; Science education with SageMath</title>
    <link rel="stylesheet" href="_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono&amp;subset=latin,latin-ext" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="_static/jquery.cookie.js"></script>
    <script src="_static/cloud.js"></script>
    <script type="text/javascript" src="https://sagecell.sagemath.org/static/jquery.min.js"></script>
    <script type="text/javascript" src="https://sagecell.sagemath.org/static/embedded_sagecell.js"></script>
    <script type="text/javascript">
        sagecell.makeSagecell({inputLocation: ".sage_linked",
                               linked: true});
        sagecell.makeSagecell({inputLocation: ".sage_unlinked",
                               linked: false});
    </script>

    <style type="text/css">
        .sagecell .CodeMirror-scroll {
            overflow-y: hidden;
            overflow-x: auto;
        }
        .sagecell .CodeMirror {
            height: auto;
        }
    </style>
    
    <link rel="search" title="Search" href="search.html" />
 
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
  </head><body>
  <div class="relbar-top">
    
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
  <li><a href="index.html">Science education with SageMath</a> &#187;</li>
  
        <li class="nav-item nav-item-this"><a href="">Please write a title for this worksheet!</a></li> 
      </ul>
    </div>
  </div>
  
  <div class="content">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="please-write-a-title-for-this-worksheet">
<h1>Please write a title for this worksheet!<a class="headerlink" href="#please-write-a-title-for-this-worksheet" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><p><em>Improved version of teaching materials for the topic:</em></p>
</div></blockquote>
<p>Sound Waves</p>
<p><strong>Introduction</strong></p>
<p>The lesson described below was tested twice on students learning physics at advanced level (age 17). In 2015 the numerical amount of group was 14, in 2016: 21. This lesson was preceded by a short course of programming in Python and consists of two parts: theoretical introduction and IT laboratory. Both parts were filmed in 2015 and published on Youtube with English subtitles.</p>
<p>The main aims of this lesson are:</p>
<ul class="simple">
<li><p>Explaining, what is sound.</p></li>
<li><p>Explaining, what is acoustics, how it is divided and why?</p></li>
<li><p>Defining all physical and physiological quantities describing sound.</p></li>
<li><p>Giving a basic knowledge of sound spectrum.</p></li>
<li><p>Exercising in plotting diagrams in Python.</p></li>
<li><p>Showing, that any periodical function can be presented as a linear combination of sine functions.</p></li>
<li><p>Exercising interaction and sliders in Python.</p></li>
</ul>
<blockquote>
<div><p>Preparing this lesson we should take into consideration the following circumstances:</p>
</div></blockquote>
<ul class="simple">
<li><p>At high school level pupils cannot integrate. They have heard about integral and its applications, but performing integrations at the level required by Fourier transform is far beyond their abilities. Therefore real calculations must be replaced by simple playing with amplitudes of harmonics.</p></li>
<li><p>It is the first students’ contact with &#64;interact and sliders. Technical problems themselves are heavy to overcome, so there is no point in making the physical side of the topic more difficult.</p></li>
<li><p>This lesson (like any other) should be attractive, so spectacular results should be reached by relatively simple means.</p></li>
<li><p>The level of difficulties of the examples should gradually grow during this lesson. A good idea is to show different solutions for the same problem.</p></li>
</ul>
<p><strong>Theoretical part</strong></p>
<p>Exercises in programming were preceded by a theoretical lecture about sound waves, published at: <a class="reference external" href="https://youtu.be/dp-ajKHs6WU">https://youtu.be/dp-ajKHs6WU</a></p>
<p>Main problems discussed in this lecture are the following:</p>
<ul class="simple">
<li><p>Definition of sound wave.</p></li>
<li><p>Announcement, that some ideas from this lecture will be developed further during IT lesson with the use of SAGE and Python</p></li>
<li><p>Definition of acoustics and explanation the essence of physical and physiological acoustics.</p></li>
<li><p>Infrasounds and ultrasounds.</p></li>
<li><p>Frequency / wavelength and their relation to the tone</p></li>
<li><p>Spectrum of sound and its relation to the timbre.</p></li>
<li><p>Weber - Fechner law.</p></li>
<li><p>Sound intensity level and its relation to the loudness (audiogram).</p></li>
<li><p>Phase of the sound wave and its relation to the spatial impressions.</p></li>
</ul>
<p>During this lesson a software acoustic generator is used to demonstrate the tone output with respect to the frequency. It can also show, how changes of shape of signal influences the sound spectrum and timbre of voice. Students are informed, that they will use Python to illustrate the shape of complex signal with respect to the amplitudes of individual harmonics.</p>
<p><strong>IT part</strong></p>
<p>The IT part of this lesson was executed in IT laboratory, filmed and published at: <a class="reference external" href="https://youtu.be/0fVgRy6CpWQ">https://youtu.be/0fVgRy6CpWQ</a></p>
<p>This film, made in 2015, shows the previous version of programming. After some improvement it looks as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">wall</span> <span class="o">=</span> <span class="mi">20</span> <span class="c1"># limit of domain = end of space accessible for waves</span>
</pre></div>
</div>
<p>Hypothetical complex wave, defined in a static manner</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">amplitudes</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">/</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">WaveComplex</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="n">sin</span><span class="p">((</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">amplitudes</span><span class="p">))</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">WaveComplex</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="mi">1</span><span class="o">/</span><span class="mi">10</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">5</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="mi">3</span><span class="o">/</span><span class="mi">10</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">plot</span><span class="p">(</span><span class="n">WaveComplex</span><span class="p">,</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wall</span><span class="p">))</span>
</pre></div>
</div>
<p>The same as above, but obtained with different tools.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">WaveComplexPlot</span><span class="p">(</span><span class="n">amplitudes</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">tmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">tmax</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="o">...</span>       <span class="n">WaveComplex</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">a</span><span class="o">*</span><span class="n">sin</span><span class="p">((</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">t</span><span class="p">)</span> <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">amplitudes</span><span class="p">))</span>
<span class="o">...</span>       <span class="n">plt</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">WaveComplex</span><span class="p">,</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">tmin</span><span class="p">,</span> <span class="n">tmax</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="o">...</span>       <span class="n">show</span><span class="p">(</span><span class="n">plt</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">WaveComplexPlot</span><span class="p">(</span><span class="n">tmax</span><span class="o">=</span><span class="n">wall</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
<p>Another version of the same function, but the individual amplitudes are now controlled by sliders.</p>
<p>Because students are working on server sage03 with version 6.4.1 of SAGE, we cannot use the ready function histogram. Instead I propose my own version.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">WaveComplexPlot</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">A2</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">A3</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">A4</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">A5</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwarg</span><span class="p">):</span>
<span class="o">...</span>       <span class="n">WaveComplex</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="n">A1</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">+</span> <span class="n">A2</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">A3</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="n">A4</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="o">*</span><span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">A5</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">t</span><span class="o">*</span><span class="mi">5</span><span class="p">)</span>
<span class="o">...</span>       <span class="k">return</span> <span class="n">plot</span><span class="p">(</span><span class="n">WaveComplex</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wall</span><span class="p">)</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">WaveComplexPlot</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="nd">@interact</span>
<span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">A1_</span><span class="o">=</span><span class="n">slider</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">A2_</span><span class="o">=</span><span class="n">slider</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">A3_</span><span class="o">=</span><span class="n">slider</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">A4_</span><span class="o">=</span><span class="n">slider</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.01</span><span class="p">),</span> <span class="n">A5_</span><span class="o">=</span><span class="n">slider</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)):</span>
<span class="o">...</span>       <span class="n">plt</span> <span class="o">=</span> <span class="n">WaveComplexPlot</span><span class="p">(</span><span class="n">A1</span><span class="o">=</span><span class="n">A1_</span><span class="p">,</span><span class="n">A2</span><span class="o">=</span><span class="n">A2_</span><span class="p">,</span> <span class="n">A3</span><span class="o">=</span><span class="n">A3_</span><span class="p">,</span> <span class="n">A4</span><span class="o">=</span><span class="n">A4_</span><span class="p">,</span> <span class="n">A5</span><span class="o">=</span><span class="n">A5_</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="o">...</span>       <span class="n">show</span><span class="p">(</span><span class="n">plt</span><span class="p">)</span>
<span class="o">...</span>       <span class="n">histogram</span> <span class="o">=</span> <span class="n">line</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">A1_</span><span class="p">)],</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="n">line</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">A2_</span><span class="p">)],</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="n">line</span><span class="p">([(</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="n">A3_</span><span class="p">)],</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="n">line</span><span class="p">([(</span><span class="mi">4</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="n">A4_</span><span class="p">)],</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="n">line</span><span class="p">([(</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="n">A5_</span><span class="p">)],</span> <span class="n">thickness</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="o">...</span>       <span class="n">show</span><span class="p">(</span><span class="n">histogram</span><span class="p">)</span>
</pre></div>
</div>
<p>Decomposition of an example function with the use of Fourier transform.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">n</span><span class="o">*</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">f</span> <span class="o">=</span> <span class="n">Piecewise</span><span class="p">([[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">f</span><span class="p">]])</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">show</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">plot</span><span class="p">(),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">sine_coeffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">N</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">fourier_series_sine_coefficient</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">pi</span><span class="p">),</span> <span class="n">digits</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)]</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">show</span><span class="p">(</span><span class="n">bar_chart</span><span class="p">(</span><span class="n">sine_coeffs</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sage: Piecewise?
&lt;html&gt;...&lt;/html&gt;
</pre></div>
</div>
<p>Similar analysis extended to a sawtooth-like function as well as the functions used with the sound generator as shown in the video.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">sawtooth</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">pi</span><span class="o">-</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">sawtooth</span> <span class="o">=</span> <span class="n">Piecewise</span><span class="p">([[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">sawtooth</span><span class="p">]])</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">show</span><span class="p">(</span><span class="n">sawtooth</span><span class="o">.</span><span class="n">plot</span><span class="p">(),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">sine_coeffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">N</span><span class="p">(</span><span class="n">sawtooth</span><span class="o">.</span><span class="n">fourier_series_sine_coefficient</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">pi</span><span class="p">),</span> <span class="n">digits</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)]</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">show</span><span class="p">(</span><span class="n">bar_chart</span><span class="p">(</span><span class="n">sine_coeffs</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">triangle1</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="o">*</span><span class="n">t</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">triangle2</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="o">*</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">triangle3</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="o">*</span><span class="p">((</span><span class="n">t</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">))</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">triangle</span> <span class="o">=</span> <span class="n">Piecewise</span><span class="p">([[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">triangle1</span><span class="p">],</span>
<span class="o">...</span>                         <span class="p">[(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">triangle2</span><span class="p">],</span>
<span class="o">...</span>                         <span class="p">[(</span><span class="mi">3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">triangle3</span><span class="p">]])</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">show</span><span class="p">(</span><span class="n">triangle</span><span class="o">.</span><span class="n">plot</span><span class="p">(),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">sine_coeffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">N</span><span class="p">(</span><span class="n">triangle</span><span class="o">.</span><span class="n">fourier_series_sine_coefficient</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">pi</span><span class="p">),</span> <span class="n">digits</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)]</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">show</span><span class="p">(</span><span class="n">bar_chart</span><span class="p">(</span><span class="n">sine_coeffs</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="n">upper</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">lower</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">rectangle</span> <span class="o">=</span> <span class="n">Piecewise</span><span class="p">([[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="p">),</span> <span class="n">upper</span><span class="p">],</span>
<span class="o">...</span>                          <span class="p">[(</span><span class="n">pi</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">lower</span><span class="p">]])</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">show</span><span class="p">(</span><span class="n">rectangle</span><span class="o">.</span><span class="n">plot</span><span class="p">(),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">sine_coeffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">N</span><span class="p">(</span><span class="n">rectangle</span><span class="o">.</span><span class="n">fourier_series_sine_coefficient</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">pi</span><span class="p">),</span> <span class="n">digits</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)]</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">show</span><span class="p">(</span><span class="n">bar_chart</span><span class="p">(</span><span class="n">sine_coeffs</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>With the use of interact, the code segments above could be combined as follows. Students may now play with different input signal forms:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">pw_sawtooth</span><span class="p">():</span>
<span class="o">...</span>       <span class="n">sawtooth</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">pi</span><span class="o">-</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
<span class="o">...</span>       <span class="k">return</span> <span class="n">Piecewise</span><span class="p">([[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">sawtooth</span><span class="p">]])</span>
<span class="o">...</span>
<span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">pw_triangle</span><span class="p">():</span>
<span class="o">...</span>       <span class="n">triangle1</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="o">*</span><span class="n">t</span>
<span class="o">...</span>       <span class="n">triangle2</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="o">*</span><span class="p">(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="o">-</span><span class="p">(</span><span class="n">t</span><span class="o">-</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
<span class="o">...</span>       <span class="n">triangle3</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="o">*</span><span class="p">((</span><span class="n">t</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">))</span>
<span class="o">...</span>       <span class="k">return</span> <span class="n">Piecewise</span><span class="p">([[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">triangle1</span><span class="p">],</span>
<span class="o">...</span>                         <span class="p">[(</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">),</span> <span class="n">triangle2</span><span class="p">],</span>
<span class="o">...</span>                         <span class="p">[(</span><span class="mi">3</span><span class="o">*</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">triangle3</span><span class="p">]])</span>
<span class="o">...</span>
<span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">pw_rectangle</span><span class="p">():</span>
<span class="o">...</span>       <span class="n">upper</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span>
<span class="o">...</span>       <span class="n">lower</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="o">...</span>       <span class="k">return</span> <span class="n">Piecewise</span><span class="p">([[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">pi</span><span class="p">),</span> <span class="n">upper</span><span class="p">],</span>
<span class="o">...</span>                         <span class="p">[(</span><span class="n">pi</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">),</span> <span class="n">lower</span><span class="p">]])</span>
<span class="n">sage</span><span class="p">:</span> <span class="nd">@interact</span>
<span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">fourier_sine_trafo</span><span class="p">(</span><span class="n">signalname</span><span class="o">=</span><span class="n">selector</span><span class="p">([</span><span class="s1">&#39;sawtooth&#39;</span><span class="p">,</span> <span class="s1">&#39;triangle&#39;</span><span class="p">,</span> <span class="s1">&#39;rectangle&#39;</span><span class="p">])):</span>
<span class="o">...</span>       <span class="n">signaldict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;sawtooth&#39;</span><span class="p">:</span> <span class="n">pw_sawtooth</span><span class="p">,</span>
<span class="o">...</span>                     <span class="s1">&#39;triangle&#39;</span><span class="p">:</span> <span class="n">pw_triangle</span><span class="p">,</span>
<span class="o">...</span>                     <span class="s1">&#39;rectangle&#39;</span><span class="p">:</span> <span class="n">pw_rectangle</span><span class="p">}</span>
<span class="o">...</span>       <span class="n">signal</span> <span class="o">=</span> <span class="n">signaldict</span><span class="p">[</span><span class="n">signalname</span><span class="p">]()</span>
<span class="o">...</span>       <span class="n">show</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">plot</span><span class="p">(),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="o">...</span>       <span class="n">sine_coeffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">N</span><span class="p">(</span><span class="n">signal</span><span class="o">.</span><span class="n">fourier_series_sine_coefficient</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">pi</span><span class="p">),</span> <span class="n">digits</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">)]</span>
<span class="o">...</span>       <span class="n">show</span><span class="p">(</span><span class="n">bar_chart</span><span class="p">(</span><span class="n">sine_coeffs</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p>We can also control the number of iteration. In the example below, the loop superimposes plots of functions and displays the sum together with the components:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="nd">@interact</span>
<span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">slider</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">)):</span>
<span class="o">...</span>       <span class="n">plt</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">plot</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="n">i</span><span class="p">,</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wall</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="n">hue</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="mi">10</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="o">...</span>       <span class="n">plt</span> <span class="o">=</span> <span class="n">plt</span><span class="o">+</span><span class="n">plot</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)),</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wall</span><span class="p">),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="o">...</span>       <span class="n">show</span><span class="p">(</span><span class="n">plt</span><span class="p">)</span>
</pre></div>
</div>
<p>Now the loop creates a complex wave built with harmonics of amplitudes inversely proportional to their frequencies. The number of iterations is controlled by a slider. The functions shown above are added each to other and the sum is plotted.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="nd">@interact</span>
<span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">n</span><span class="o">=</span><span class="n">slider</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">)):</span>
<span class="o">...</span>       <span class="n">wave</span><span class="p">(</span><span class="n">t</span><span class="p">)</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">t</span><span class="p">)</span><span class="o">/</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>
<span class="o">...</span>       <span class="n">plot</span><span class="p">(</span><span class="n">wave</span><span class="p">,</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wall</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>The same effect, but without any interaction.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sage</span><span class="p">:</span> <span class="k">def</span> <span class="nf">WaveCmplx</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
<span class="o">...</span>           <span class="n">w</span><span class="o">=</span><span class="mi">0</span>
<span class="o">...</span>           <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
<span class="o">...</span>               <span class="n">w</span><span class="o">=</span><span class="n">w</span><span class="o">+</span><span class="mi">1</span><span class="o">/</span><span class="n">i</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
<span class="o">...</span>           <span class="k">return</span> <span class="n">w</span>
<span class="n">sage</span><span class="p">:</span> <span class="n">plot</span><span class="p">(</span><span class="n">WaveCmplx</span><span class="p">,</span>  <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wall</span><span class="p">),</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Conclusions</strong></p>
<p>Using Python led pupils to better understanding the essence of sound spectrum. In high school pupils don’t know Fourier transform - it is beyond the curriculum. It is a big discovery for them, that any periodic function, which has the correct symmetries (which is the case in the context of acoustic waves), can be presented as a combination of sine functions.</p>
<p>From the other side, the participants of the lesson had an opportunity to learn the basic methods of plotting in interactive manner, which was new for them. The topic “sound spectrum” became less abstract, because students had it “in their hands”.</p>
<p>My observation is, that students are happy when using ready tools included in this worksheet, but are not able to develop them. My attempts to encourage students to improve above code as a homework failed.</p>
<p>Adam Ogaza, 12th October 2016</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  </div>
  <div class="relbar-bottom">
    
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
  <li><a href="index.html">Science education with SageMath</a> &#187;</li>
  
        <li class="nav-item nav-item-this"><a href="">Please write a title for this worksheet!</a></li> 
      </ul>
    </div>
  </div>
  
  <div class="footer">
    <a class="logo" href="http://icse.us.edu.pl/" target="_blank"><img src="_static/logo-icse.png" alt="ICSE"/></a><br/>
    &copy; Copyright Creative Commons CC-BY 4.0, iCSE-team.
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 3.2.1.
  </div>
  </body>
</html>